#pragma config(Sensor, in1,    LeftLightSensor, sensorReflection)
#pragma config(Sensor, in2,    MiddleLightSensor, sensorReflection)
#pragma config(Sensor, in3,    RightLightSensor, sensorReflection)
#pragma config(Sensor, in4,    WristPotentiometer, sensorPotentiometer)
#pragma config(Sensor, in6,    GyroSensor,     sensorGyro)
#pragma config(Sensor, dgtl7,  TouchSensor,    sensorTouch)
#pragma config(Sensor, dgtl8,  SonarSensor,    sensorSONAR_cm)
#pragma config(Sensor, I2C_1,  RightEncoder,   sensorNone)
#pragma config(Sensor, I2C_2,  LeftEncoder,    sensorNone)
#pragma config(Sensor, I2C_3,  ArmEncoder,     sensorNone)
#pragma config(Motor,  port1,           FrontRightMotor, tmotorVex393_HBridge, openLoop, reversed)
#pragma config(Motor,  port2,           RearRightMotor, tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port3,           FrontLeftMotor, tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port4,           RearLeftMotor, tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port6,           ClawMotor,     tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port7,           ArmMotor,      tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port8,           LeftExtendMotor, tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port9,           RightExtendMotor, tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port10,          WristMotor,    tmotorVex393_HBridge, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "RVWFantasticBotFunctions.c"

task main()
{
	init();
	while(true)
	{
		loopCode();
		switch(step)
		{
			case 0: //Move to the mobile goal and lift arm
				moveArm(20);
				if(goForward(1200) == 0)
					clearStep();
				break;
			case 1: //Release cone onto the mobile goal (2 points)
				openClaw(127);
				if(wait(50) == 0)
					clearStep();
				break;
			case 2: //Lower the arm and wrist
				moveArm(-127, false);
				wristUp(-127);
				if(wait(350) == 0) 
					clearStep();
				break;
			case 3: //Grab the mobile goal
				openClaw(-127);
				if(wait(50) == 0)
					clearStep();
				break;
			case 4: //Turn to face the matchloads
				if(turn(2561) == 0)
					clearStep();
				break;
			case 5: //Move toward the matchload and stack another cone (4 points)
				if(goForward(875) == 0)
					clearStep();
				break;
			case 6: //Move back
				if(goForward(-325) == 0)
					clearStep();
				break;
			case 7: //Move toward the matchloads again
				if(goForward(302.5) == 0)
					clearStep();
				break;
			case 8: //Wait for cone to appear and stack it (6 points)
				if(wait(500) == 0)
					clearStep();
				break;
			case 9: //Move back
				if(goForward(-300) == 0)
					clearStep();
				break;
			case 10: //Turn to face the starting tile
				if(turn(1350) == 0)
					clearStep();
				break;
			case 11: //Release the mobile goal and move back a bit
				openClaw(127); 
				if(goForward(-100) == 0)
					clearStep();	
				break;
			case 12: //Turn 180 degrees to face a cone
				if(turn(3150) == 0)
					clearStep();
				break;
			case 13: //Move towards the cone
				if(goForward(250) == 0)
					clearStep();
				break;
			case 14: //Grab the cone
				openClaw(-127);
				if(wait(100) == 0)
					clearStep();
				break;
			case 15: //Turn back to face the mobile goal while lifting the arm and lowering the wrist
				moveArm(50);
				wristUp(-20);
				if(turn(1350) == 0)
					clearStep();
				break;
			case 16: //Move towards the mobile goal
				if(goForward(550) == 0)
					clearStep();
				break;
			case 17: //Release cone (8 points)
				openClaw(127);
				if(wait(50) == 0)
					clearStep();
				break;
		}
	}
}
